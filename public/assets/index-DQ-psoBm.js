import{_ as W}from"./layouts-copyright-DMd9-oLh.js";import{e as F,r as j,b9 as B,g as u,j as a,l as t,q as n,ad as J,B as w,v as e,J as K,aa as Y,n as H,F as C,m as Q,K as X,t as p,ab as Z,Y as ee,af as te,i as v,V as se,E as I,h as g,U as oe}from"./vendor-ulBTnC7v.js";import{u as le,_ as ae}from"./vcode-OuNKY-AT.js";import{k as ne,a as re,b as ie,l as ce,f as de,g as ue,i as k,r as pe}from"./index-DfryAjm0.js";const ge={class:"login-mask"},me={class:"languare pointer px-3 flex flex-center"},_e={class:"flex flex-column languare-list"},fe=["onClick"],he={class:"flex flex-1 flex-center"},be={key:0,class:"login-image mr-10"},xe=["src"],ve={class:"text-center p-5"},ke={class:"h6 font-weight-600"},ye={class:"h10 pt-3"},we={class:"flex-1 w-60 mx-auto flex flex-center flex-column"},Ce={class:"px-3"},Ve={class:"p-4 flex flex-center mb-10"},Ee={class:"login-button"},Te={key:0,class:"py-4 flex flex-center text-info"},Re={key:1,class:"py-4 flex flex-center text-dark"},Se={class:"bg-filter bg-mask-light"},Be=F({name:"/register"}),Le=F({...Be,setup(Ie){const{t:o}=ne.global,N=re(),{WEBCONFIG:i}=ie(N),{isDisabled:U,vcodeText:z,getVcode:L}=le(),V=j(),l=B({username:"",captcha:"",vcode:"",password:"",token:""}),P=B({username:[{required:!0,message:o("register.rules.username"),trigger:"blur"}],password:[{required:!0,message:o("register.rules.password"),trigger:"blur"}]}),$=()=>{var c;(c=V.value)==null||c.validate(s=>{var _;s?k.post((_=i.value.register)==null?void 0:_.url,l).then(r=>{(r==null?void 0:r.code)===k.ResponseCode.SUCCESS?pe.push("/login"):r.code===k.ResponseCode.REDIRECT_CONFIRM?se.confirm(r.msg,o("message.tips"),{confirmButtonText:r.data.confirmButtonText||o("button.redirectText"),cancelButtonText:o("button.cancelText"),type:"warning"}).then(()=>{globalThis.location.href=r.data.url}):r.code===k.ResponseCode.REDIRECT?globalThis.location.href=r.data.url:I.info(r.msg)}):I.error(o("form.rules.warning"))})},q=c=>{l.token=c,l.captcha=""},{BgImage:E,Image:T}=ce(),R=de(),D=c=>{R.setState("language",c),document.documentElement.setAttribute("lang",c),oe(()=>{globalThis.location.reload()})};return(c,s)=>{const _=ue,r=X,M=J,f=ee,h=Z,A=ae,b=te,G=Y,O=W;return g(),u("div",{class:"login",style:H([e(E)?`backgroundImage:url(${e(E)})`:""])},[a("div",ge,[a("div",me,[t(M,{placement:"bottom-end"},{reference:n(()=>[t(r,{size:"20"},{default:n(()=>[t(_)]),_:1})]),default:n(()=>[a("div",_e,[(g(!0),u(C,null,Q(e(R).LANGUARE,(m,x)=>(g(),u("span",{class:"languare-item",onClick:y=>D(m.value),key:x},p(m.label),9,fe))),128))])]),_:1})]),a("div",he,[e(T)?(g(),u("div",be,[a("img",{src:e(T),alt:"logo",class:"login-image"},null,8,xe)])):w("",!0),t(G,{ref_key:"loginFormRef",ref:V,model:e(l),rules:e(P),class:"login-form bg-filter","label-position":"top","hide-required-asterisk":"","show-message":!1,onSubmit:K($,["prevent"]),autocomplete:"nope"},{default:n(()=>{var m,x,y,S;return[a("div",ve,[a("div",ke,p((m=e(i).register)==null?void 0:m.title),1),a("div",ye,p(e(i).web_title),1)]),a("div",we,[t(h,{label:e(o)("register.label.username"),class:"w-100",prop:"username"},{default:n(()=>[t(f,{modelValue:e(l).username,"onUpdate:modelValue":s[0]||(s[0]=d=>e(l).username=d),maxlength:"11",placeholder:e(o)("register.usernamePlaceholder"),size:"large"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(h,{label:e(o)("register.label.captcha"),class:"w-100",prop:"captcha"},{default:n(()=>[t(f,{modelValue:e(l).captcha,"onUpdate:modelValue":s[1]||(s[1]=d=>e(l).captcha=d),placeholder:e(o)("register.captchaPlaceholder"),size:"large"},{append:n(()=>[t(A,{onChange:q,bg:"52,52,52"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(h,{label:e(o)("register.label.vcode"),class:"w-100",prop:"vcode"},{default:n(()=>[t(f,{modelValue:e(l).vcode,"onUpdate:modelValue":s[3]||(s[3]=d=>e(l).vcode=d),placeholder:e(o)("register.vcodePlaceholder"),size:"large",maxlength:"6"},{append:n(()=>[a("div",Ce,[t(b,{onClick:s[2]||(s[2]=d=>e(L)({username:e(l).username,token:e(l).token,captcha:e(l).captcha,scene:"register"})),type:e(U)?"info":"primary",target:"_blank",underline:"never"},{default:n(()=>[v(p(e(z)),1)]),_:1},8,["type"])])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(h,{label:e(o)("register.label.password"),class:"w-100",prop:"password"},{default:n(()=>[t(f,{type:"password","show-password":"",modelValue:e(l).password,"onUpdate:modelValue":s[4]||(s[4]=d=>e(l).password=d),placeholder:e(o)("register.passwordPlaceholder"),size:"large"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),a("div",Ve,[a("button",Ee,p(e(o)("button.registerText")),1)]),e(i).login.link_text?(g(),u("div",Te,[t(b,{href:"#/login",type:"primary",underline:"never"},{default:n(()=>[v(p(e(i).login.link_text),1)]),_:1})])):w("",!0),(x=e(i).register)!=null&&x.user_agreement?(g(),u("div",Re,[e(i).register.user_agreement_config?(g(),u(C,{key:0},[a("span",null,p(e(i).register.user_agreement_config.label),1),t(b,{href:(y=e(i).register)==null?void 0:y.user_agreement,type:"primary",target:"_blank",underline:"never"},{default:n(()=>[v(p(e(i).register.user_agreement_config.title),1)]),_:1},8,["href"])],64)):(g(),u(C,{key:1},[s[6]||(s[6]=a("span",null,'点击"注册"即代表你已阅读并同意',-1)),t(b,{href:(S=e(i).register)==null?void 0:S.user_agreement,type:"primary",target:"_blank",underline:"never"},{default:n(()=>s[5]||(s[5]=[v("《用户协议》")])),_:1,__:[5]},8,["href"])],64))])):w("",!0)]}),_:1},8,["model","rules"])]),a("div",Se,[t(O,{class:"flex-y-center"})])])],4)}}});export{Le as default};
