import{_ as M}from"./copyright-82df2591.js";import{f as E,r as $,aY as k,d as m,e as _,x as a,u as e,l as V,p as o,w as n,y as q,aX as G,a7 as L,t as f,A as g,G as O,E as C,J as W,a6 as j,ah as A}from"./vendor-72f7111e.js";import{u as J,_ as X}from"./vcode-10c9fe52.js";import{a as Y,b as H,j as K,h as p,r as P}from"./index-cdfbd549.js";const Q={class:"login-mask"},Z={class:"flex flex-1 flex-center"},ee={key:0,class:"login-image mr-10"},te=["src"],se={class:"text-center p-5"},oe={class:"h6 font-weight-600"},ae={class:"h10 pt-3"},le={class:"flex-1 w-60 mx-auto flex flex-center flex-column"},ne={class:"px-3"},re=a("div",{class:"p-4 flex flex-center mb-10"},[a("button",{class:"login-button"},"注册")],-1),ie={class:"py-4 flex flex-center text-info"},ce={key:0,class:"py-4 flex flex-center text-dark"},de=a("span",null,"点击“注册”即代表你已阅读并同意",-1),pe={class:"bg-filter bg-mask-light"},ue=E({name:"/register"}),xe=E({...ue,setup(me){const R=Y(),{WEBCONFIG:c}=H(R),{isDisabled:B,vcodeText:I,getVcode:T}=J(),h=$(),t=k({username:"",captcha:"",vcode:"",password:"",token:""}),S=k({username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),F=()=>{var d;(d=h.value)==null||d.validate(l=>{var i;l?p.post((i=c.value.register)==null?void 0:i.url,t).then(s=>{(s==null?void 0:s.code)===p.ResponseCode.SUCCESS?P.push("/login"):s.code===p.ResponseCode.REDIRECT_CONFIRM?O.confirm(s.msg,"提示",{confirmButtonText:s.data.confirmButtonText||"跳转",cancelButtonText:"取消",type:"warning"}).then(()=>{globalThis.location.href=s.data.url}):s.code===p.ResponseCode.REDIRECT?globalThis.location.href=s.data.url:C.info(s.msg)}):C.error("请将表单填写完整")})},N=d=>{t.token=d,t.captcha=""},{BgImage:x,Image:v}=K();return(d,l)=>{const i=W,s=j,z=X,u=A,U=L,D=M;return m(),_("div",{class:"login",style:G([e(x)?`backgroundImage:url(${e(x)})`:""])},[a("div",Q,[a("div",Z,[e(v)?(m(),_("div",ee,[a("img",{src:e(v),alt:"logo",class:"login-image"},null,8,te)])):V("",!0),o(U,{ref_key:"loginFormRef",ref:h,model:e(t),rules:e(S),class:"login-form bg-filter","label-position":"top","hide-required-asterisk":"","show-message":!1,onSubmit:q(F,["prevent"]),autocomplete:"nope"},{default:n(()=>{var b,y,w;return[a("div",se,[a("div",oe,f((b=e(c).register)==null?void 0:b.title),1),a("div",ae,f(e(c).title),1)]),a("div",le,[o(s,{label:"手机号",class:"w-100",prop:"username"},{default:n(()=>[o(i,{modelValue:e(t).username,"onUpdate:modelValue":l[0]||(l[0]=r=>e(t).username=r),maxlength:"11",placeholder:"手机号",size:"large"},null,8,["modelValue"])]),_:1}),o(s,{label:"图形验证码",class:"w-100",prop:"captcha"},{default:n(()=>[o(i,{modelValue:e(t).captcha,"onUpdate:modelValue":l[1]||(l[1]=r=>e(t).captcha=r),placeholder:"图形验证码",size:"large"},{append:n(()=>[o(z,{onChange:N,bg:"52,52,52"})]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"短信验证码",class:"w-100",prop:"vcode"},{default:n(()=>[o(i,{modelValue:e(t).vcode,"onUpdate:modelValue":l[3]||(l[3]=r=>e(t).vcode=r),placeholder:"短信验证码",size:"large",maxlength:"6"},{append:n(()=>[a("div",ne,[o(u,{onClick:l[2]||(l[2]=r=>e(T)({username:e(t).username,token:e(t).token,captcha:e(t).captcha,scene:"register"})),type:e(B)?"info":"primary",target:"_blank",underline:!1},{default:n(()=>[g(f(e(I)),1)]),_:1},8,["type"])])]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"密码",class:"w-100",prop:"password"},{default:n(()=>[o(i,{type:"password","show-password":"",modelValue:e(t).password,"onUpdate:modelValue":l[4]||(l[4]=r=>e(t).password=r),placeholder:"密码",size:"large"},null,8,["modelValue"])]),_:1})]),re,a("div",ie,[o(u,{href:"#/login",type:"primary",underline:!1},{default:n(()=>[g("已有账号？立即登录")]),_:1})]),(y=e(c).register)!=null&&y.user_agreement?(m(),_("div",ce,[de,o(u,{href:(w=e(c).register)==null?void 0:w.user_agreement,type:"primary",target:"_blank",underline:!1},{default:n(()=>[g("《用户协议》")]),_:1},8,["href"])])):V("",!0)]}),_:1},8,["model","rules"])]),a("div",pe,[o(D,{class:"flex-y-center"})])])],4)}}});export{xe as default};
