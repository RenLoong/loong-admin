import{_ as D}from"./copyright-281a328c.js";import{f as E,r as M,aF as k,e as u,A as a,u as e,v as C,x as s,w as n,C as q,aG as G,T as L,d as _,t as f,G as g,Y as O,E as V,R as W,Q as A,a8 as Q}from"./vendor-8484c245.js";import{u as Y,_ as j}from"./vcode-144749dd.js";import{c as H,d as J,h as K,$ as p,r as P}from"./index-a553babf.js";const X={class:"login-mask"},Z={class:"flex flex-1 flex-center"},ee={key:0,class:"login-image mr-10"},te=["src"],oe={class:"text-center p-5"},se={class:"h6 font-weight-600"},ae={class:"h10 pt-3"},le={class:"flex-1 w-60 mx-auto flex flex-center flex-column"},ne={class:"px-3"},re=a("div",{class:"p-4 flex flex-center mb-10"},[a("button",{class:"login-button"},"注册")],-1),ie={class:"py-4 flex flex-center text-info"},ce={key:0,class:"py-4 flex flex-center text-dark"},de=a("span",null,"点击“注册”即代表你已阅读并同意",-1),pe={class:"bg-filter bg-mask-light"},me=E({name:"/register"}),xe=E({...me,setup(ue){const R=H(),{WEBCONFIG:c}=J(R),{isDisabled:B,vcodeText:I,getVcode:T}=Y(),h=M(),t=k({username:"",captcha:"",vcode:"",password:"",token:""}),S=k({username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),F=()=>{var d;(d=h.value)==null||d.validate(l=>{var i;l?p.post((i=c.value.register)==null?void 0:i.url,t).then(o=>{(o==null?void 0:o.code)===p.ResponseCode.SUCCESS?P.push("/login"):o.code===p.ResponseCode.REDIRECT_CONFIRM?O.confirm(o.msg,"提示",{confirmButtonText:o.data.confirmButtonText||"跳转",cancelButtonText:"取消",type:"warning"}).then(()=>{globalThis.location.href=o.data.url}):o.code===p.ResponseCode.REDIRECT?globalThis.location.href=o.data.url:V.info(o.msg)}):V.error("请将表单填写完整")})},N=d=>{t.token=d,t.captcha=""},{BgImage:x,Image:v}=K();return(d,l)=>{const i=W,o=A,z=j,m=Q,U=L,$=D;return _(),u("div",{class:"login",style:G([e(x)?`backgroundImage:url(${e(x)})`:""])},[a("div",X,[a("div",Z,[e(v)?(_(),u("div",ee,[a("img",{src:e(v),alt:"logo",class:"login-image"},null,8,te)])):C("",!0),s(U,{ref_key:"loginFormRef",ref:h,model:e(t),rules:e(S),class:"login-form bg-filter","label-position":"top","hide-required-asterisk":"","show-message":!1,onSubmit:q(F,["prevent"]),autocomplete:"nope"},{default:n(()=>{var b,y,w;return[a("div",oe,[a("div",se,f((b=e(c).register)==null?void 0:b.title),1),a("div",ae,f(e(c).title),1)]),a("div",le,[s(o,{label:"手机号",class:"w-100",prop:"username"},{default:n(()=>[s(i,{modelValue:e(t).username,"onUpdate:modelValue":l[0]||(l[0]=r=>e(t).username=r),maxlength:"11",placeholder:"手机号",size:"large"},null,8,["modelValue"])]),_:1}),s(o,{label:"图形验证码",class:"w-100",prop:"captcha"},{default:n(()=>[s(i,{modelValue:e(t).captcha,"onUpdate:modelValue":l[1]||(l[1]=r=>e(t).captcha=r),placeholder:"图形验证码",size:"large"},{append:n(()=>[s(z,{onChange:N,bg:"52,52,52"})]),_:1},8,["modelValue"])]),_:1}),s(o,{label:"短信验证码",class:"w-100",prop:"vcode"},{default:n(()=>[s(i,{modelValue:e(t).vcode,"onUpdate:modelValue":l[3]||(l[3]=r=>e(t).vcode=r),placeholder:"短信验证码",size:"large",maxlength:"6"},{append:n(()=>[a("div",ne,[s(m,{onClick:l[2]||(l[2]=r=>e(T)({mobile:e(t).username,token:e(t).token,captcha:e(t).captcha})),type:e(B)?"info":"primary",target:"_blank",underline:!1},{default:n(()=>[g(f(e(I)),1)]),_:1},8,["type"])])]),_:1},8,["modelValue"])]),_:1}),s(o,{label:"密码",class:"w-100",prop:"password"},{default:n(()=>[s(i,{type:"password","show-password":"",modelValue:e(t).password,"onUpdate:modelValue":l[4]||(l[4]=r=>e(t).password=r),placeholder:"密码",size:"large"},null,8,["modelValue"])]),_:1})]),re,a("div",ie,[s(m,{href:"#/login",type:"primary",underline:!1},{default:n(()=>[g("已有账号？立即登录")]),_:1})]),(y=e(c).register)!=null&&y.user_agreement?(_(),u("div",ce,[de,s(m,{href:(w=e(c).register)==null?void 0:w.user_agreement,type:"primary",target:"_blank",underline:!1},{default:n(()=>[g("《用户协议》")]),_:1},8,["href"])])):C("",!0)]}),_:1},8,["model","rules"])]),a("div",pe,[s($,{class:"flex-y-center"})])])],4)}}});export{xe as default};
